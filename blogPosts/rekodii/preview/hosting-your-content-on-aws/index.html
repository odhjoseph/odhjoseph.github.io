<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Hosting your Content on AWS - Rekodii</title><meta name="description" content="Hosting your Content on AWS, Rekodii, Joseph Odhiambo."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/hosting-your-content-on-aws/"><link rel="alternate" type="application/atom+xml" href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/feed.xml"><link rel="alternate" type="application/json" href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/feed.json"><meta property="og:title" content="Hosting your Content on AWS"><meta property="og:site_name" content="Rekodii"><meta property="og:description" content="Hosting your Content on AWS, Rekodii, Joseph Odhiambo."><meta property="og:url" content="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/hosting-your-content-on-aws/"><meta property="og:type" content="article"><link rel="stylesheet" href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/assets/css/style.css?v=ad994e06fe4ccf9aa9bbf0f25d02eaf2"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/hosting-your-content-on-aws/index.html"},"headline":"Hosting your Content on AWS","datePublished":"2023-01-14T15:31","dateModified":"2023-01-14T19:42","description":"Hosting your Content on AWS, Rekodii, Joseph Odhiambo.","author":{"@type":"Person","name":"Joseph Odhiambo","url":"file:///Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/authors/joseph-odhiambo/"},"publisher":{"@type":"Organization","name":"Joseph Odhiambo"}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="file:///Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/index.html">Rekodii</a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2023-01-14T15:31">January 14, 2023</time></div><h1>Hosting your Content on AWS</h1><div class="post__meta post__meta--author"><a href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/authors/joseph-odhiambo/index.html" class="feed__author">Joseph Odhiambo</a></div></div></header></div><div class="wrapper post__entry"><p>There are several ways to host multiple websites on AWS, including using Amazon S3 and Amazon CloudFront, or using Amazon Elastic Container Service (ECS) with a load balancer.</p><ol><li><p>Amazon S3 and CloudFront: You can host a static website on Amazon S3 and use CloudFront to distribute the content to users. You can create a new S3 bucket for each website and configure a separate CloudFront distribution for each.</p></li><li><p>Amazon Elastic Container Service (ECS) with a load balancer: You can use ECS to run and manage a containerized application, and use an Elastic Load Balancer to route traffic to the correct container. You can create a separate task definition and service for each website and configure the load balancer to route traffic to the appropriate service.</p></li></ol><p>Additionally, you can use AWS Elastic Beanstalk, EC2 instances, AWS Amplify, or AWS App Runner to host multiple websites on AWS.</p><p>Option 1:</p><div class="flex-1 overflow-hidden"><div class="react-scroll-to-bottom--css-sngnc-79elbk h-full dark:bg-gray-800"><div class="react-scroll-to-bottom--css-sngnc-1n7m0yu"><div class="flex flex-col items-center text-sm h-full dark:bg-gray-800"><div class="w-full border-b border-black/10 dark:border-gray-900/50 text-gray-800 dark:text-gray-100 group bg-gray-50 dark:bg-[#444654]"><div class="text-base gap-4 md:gap-6 m-auto md:max-w-2xl lg:max-w-2xl xl:max-w-3xl p-4 md:py-6 flex lg:px-0"><div class="relative flex w-[calc(100%-50px)] md:flex-col lg:w-[calc(100%-115px)]"><div class="flex flex-grow flex-col gap-3"><div class="min-h-[20px] flex flex-col items-start gap-4 whitespace-pre-wrap"><div class="markdown prose w-full break-words dark:prose-invert light"><ol><li><p>Create an S3 bucket: Log in to the AWS Management Console and navigate to the S3 service. Create a new bucket and give it a unique name.<br>import boto3<br><br><code># Connect to the S3 service</code><br><code>s3 = boto3.client('s3')</code><br><br><code># List of websites to manage</code><br><code>websites = [</code><br><code>    {'name': 'website1', 'bucket_name': 'website1-bucket'},</code><br><code>    {'name': 'website2', 'bucket_name': 'website2-bucket'}</code><br><code>]</code><br><br><code># Function to create an S3 bucket for a website</code><br><code>def create_bucket(bucket_name):</code><br><code>    try:</code><br><code>        s3.create_bucket(Bucket=bucket_name)</code><br><code>        print(f'Bucket {bucket_name} created.')</code><br><code>    except:</code><br><code>        print(f'Error creating bucket {bucket_name}.')</code><br><br></p></li><li><p>Configure the S3 bucket for website hosting: Go to the Properties tab of the S3 bucket and select "Static website hosting." Choose "Use this bucket to host a website" and enter the name of the index document (usually "index.html"). <br><code>def configure_bucket(bucket_name):</code><br><code>    try:</code><br><code>        # Enable website hosting on the bucket</code><br><code>        s3.put_bucket_website(Bucket=bucket_name, WebsiteConfiguration={</code><br><code>            'ErrorDocument': {'Key': 'error.html'},</code><br><code>            'IndexDocument': {'Suffix': 'index.html'}</code><br><code>        })</code><br><code>        print(f'Bucket {bucket_name} configured for website hosting.')</code><br><code>    except:</code><br><code>        print(f'Error configuring bucket {bucket_name} for website hosting.')</code></p></li><li><p>Create a CloudFront distribution: Log in to the AWS Management Console and navigate to the CloudFront service. Create a new distribution and choose "Web" for the delivery method. Select the S3 bucket you created as the origin and set the "Default Root Object" to the name of the index document.</p></li><li><p>Update your DNS settings: Update the DNS settings for your domain to point to the CloudFront distribution's URL. This can be found in the "Domain Name" field on the CloudFront distribution's details page.</p></li><li><p>Wait for the distribution status to be deployed.</p></li></ol><p>Once all the above steps are done, your website will be hosted on S3 and served through CloudFront. As CloudFront distributes your website via a global network of edge locations, it will be served to your users with lower latency and high availability.</p></div></div></div><div class="text-gray-400 flex self-end lg:self-center justify-center mt-2 gap-4 lg:gap-1 lg:absolute lg:top-0 lg:translate-x-full lg:right-0 lg:mt-0 lg:pl-2 visible"> </div></div></div></div><div class="w-full h-48 flex-shrink-0">Option 2:</div><div><div class="flex-1 overflow-hidden"><div class="react-scroll-to-bottom--css-sngnc-79elbk h-full dark:bg-gray-800"><div class="react-scroll-to-bottom--css-sngnc-1n7m0yu"><div class="flex flex-col items-center text-sm h-full dark:bg-gray-800"><div class="w-full border-b border-black/10 dark:border-gray-900/50 text-gray-800 dark:text-gray-100 group bg-gray-50 dark:bg-[#444654]"><div class="text-base gap-4 md:gap-6 m-auto md:max-w-2xl lg:max-w-2xl xl:max-w-3xl p-4 md:py-6 flex lg:px-0"><div class="relative flex w-[calc(100%-50px)] md:flex-col lg:w-[calc(100%-115px)]"><div class="flex flex-grow flex-col gap-3"><div class="min-h-[20px] flex flex-col items-start gap-4 whitespace-pre-wrap"><div class="markdown prose w-full break-words dark:prose-invert light"><ol><li><p>Create an ECS cluster: Log in to the AWS Management Console and navigate to the ECS service. Create a new cluster and give it a unique name.<br><code>import boto3</code><br><br><code># Connect to the ECS service</code><br><code>ecs = boto3.client('ecs')</code><br><br><code># List of websites to manage</code><br><code>websites = [</code><br><code>    {'name': 'website1', 'image': 'website1:latest'},</code><br><code>    {'name': 'website2', 'image': 'website2:latest'}</code><br><code>]</code><br><br><code># Function to create an ECS cluster</code><br><code>def create_cluster(cluster_name):</code><br><code>    try:</code><br><code>        ecs.create_cluster(clusterName=cluster_name)</code><br><code>        print(f'Cluster {cluster_name} created.')</code><br><code>    except:</code><br><code>        print(f'Error creating cluster {cluster_name}.')</code></p></li><li><p>Create task definitions: A task definition is a blueprint that describes how a containerized application should launch. Create a separate task definition for each website you want to host. In the task definition, you will specify the container image, CPU and memory requirements, and other settings.<br><code># Function to create a task definition for a website</code><br><code>def create_task_definition(website_name, image):</code><br><code>    try:</code><br><code>        # Create a task definition</code><br><code>        response = ecs.register_task_definition(</code><br><code>            family=website_name,</code><br><code>            containerDefinitions=[</code><br><code>                {</code><br><code>                    'name': website_name,</code><br><code>                    'image': image,</code><br><code>                    'portMappings': [</code><br><code>                        {</code><br><code>                            'containerPort': 80</code><br><code>                        }</code><br><code>                    ]</code><br><code>                }</code><br><code>            ]</code><br><code>        )</code><br><code>        print(f'Task definition {website_name} created.')</code><br><code>        return response['taskDefinition']['taskDefinitionArn']</code><br><code>    except:</code><br><code>        print(f'Error creating task definition {website_name}.')</code></p></li><li><p>Create services: A service is a long-running task that is automatically scaled. Create a separate service for each task definition, and specify the desired number of tasks and any load balancing settings.<br><code># Function to create a service for a task definition</code><br><code>def create_service(cluster_name, service_name, task_definition_arn):</code><br><code>    try:</code><br><code>        # Create a service</code><br><code>        ecs.create_service(</code><br><code>            cluster=cluster_name,</code><br><code>            serviceName=service_name,</code><br><code>            taskDefinition=task_definition_arn,</code><br><code>            desiredCount=1</code><br><code>        )</code><br><code>        print(f'Service {service_name} created.')</code><br><code>    except:</code><br><code>        print(f'Error creating service {service_name}.')</code></p></li><li><p>Create a load balancer: Log in to the AWS Management Console and navigate to the Elastic Load Balancing service. Create a new load balancer, and configure it to route traffic to the appropriate service. You can do this by creating a target group for each service and associating them with the load balancer.</p></li><li><p>Update your DNS settings: Update the DNS settings for your domain to point to the load balancer's DNS name.</p></li><li><p>Wait for the status of the services and load balancer to be in active.</p></li></ol><p>Once all the above steps are done, your multiple websites will be hosted on ECS, and the load balancer will route traffic to the appropriate service based on the hostname or path specified in the request.</p><p>It's also important to note that you can use Application Load Balancer (ALB) or Network Load Balancer (NLB) depending on your use case, and you can also use Route 53 to route traffic to the load balancer based on the domain name.</p></div></div></div><div class="text-gray-400 flex self-end lg:self-center justify-center mt-2 gap-4 lg:gap-1 lg:absolute lg:top-0 lg:translate-x-full lg:right-0 lg:mt-0 lg:pl-2 visible"> </div></div></div></div></div></div></div></div></div></div></div></div></div><div class="absolute bottom-0 left-0 w-full border-t md:border-t-0 dark:border-white/20 md:border-transparent md:dark:border-transparent md:bg-vert-light-gradient bg-white dark:bg-gray-800 md:!bg-transparent dark:md:bg-vert-dark-gradient"><form class="stretch mx-2 flex flex-row gap-3 pt-2 last:mb-2 md:last:mb-6 lg:mx-auto lg:max-w-3xl lg:pt-6"><div class="relative flex h-full flex-1 md:flex-col"><div class="flex flex-col w-full py-2 flex-grow md:py-3 md:pl-4 relative border border-black/10 bg-white dark:border-gray-900/50 dark:text-white dark:bg-gray-700 rounded-md shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:shadow-[0_0_15px_rgba(0,0,0,0.10)]"> </div></div></form></div></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on January 14, 2023</p><div class="post__share"></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/authors/joseph-odhiambo/index.html" rel="author">Joseph Odhiambo</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="file:///Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/using-r-to-plot-covid-data/index.html" class="post__nav-link" rel="prev"><span>Previous</span> Using R to Plot Covid Data</a></div></div></nav></main><footer class="footer"><div class="footer__copyright">Powered by Publii</div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="file:///Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/assets/js/svg-map.js?v=c02a714aae85e9bb30879a798f458527"></script><script defer="defer" src="file:////Users/kapetyn/Projects/odhjoseph.github.io/blogPosts/rekodii/preview/assets/js/svg-fix.js?v=7c0d2bb7276904b382e80bf2d85e8a96"></script></body></html>